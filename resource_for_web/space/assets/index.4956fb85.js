import{_ as T,aB as Q,F as J,e as K,aC as Z,aD as ee,aE as R,R as te,aF as V,k as W,aG as se,aH as ie,S as oe,a5 as L,aI as re,T as ne,aJ as ae}from"./index.0601cc40.js";import{f,h as g,i as n,K as I,aa as E,a7 as C,O as h,P as m,J as b,M as v,I as F,N as $,F as U,ak as N,al as P,A as j,Q as B,E as S,D as le}from"./vue.9201f2e4.js";import he from"./index.90276144.js";import{n as pe,q as ce,p as de,r as ue,o as fe,t as ge,v as me,w as ve,d as we,m as be,D as ye,N as xe}from"./fangkuaigray.da9dcb94.js";import{I as Ce}from"./IscasInput.cc6563c7.js";import{b as D,E as X}from"./element-plus.02c3c9a9.js";import{i as H}from"./touxiang.0d655065.js";import{d as _e}from"./toast.5031a956.js";import{g as Ae,d as M}from"./diskCommon.74a9f77c.js";import"./crypto-js.53c8803a.js";import"./lodash.51aea353.js";import"./spark-md5.2cc5764b.js";import"./heic2any.04955513.js";import"./xlsx.f5a5a084.js";import"./del-album.a1cae891.js";import"./loginOut.10c3f0c9.js";let O=6;const Se={data(){return{pasteResult:[]}},props:{code:{type:String,default:""}},computed:{input(){return new RegExp("^\\d{"+O+"}$","g").test(this.code.toString())?this.code.toString().split(""):this.pasteResult.length===O?this.pasteResult:new Array(O)}},mounted(){this.$nextTick(()=>{this.$refs.firstinput.focus()})},methods:{inputEvent(e){var t=e.target.dataset.index*1,i=e.target;i.value=i.value.replace(/Digit|Numpad/i,""),this.input[t]=i.value},clear(){this.input[0]="",this.input[1]="",this.input[2]="",this.input[3]="",this.input[4]="",this.input[5]="",this.$forceUpdate()},keydown(e){var t=e.target.dataset.index*1,i=e.target;e.key==="Backspace"?this.input[t].length>0?(this.input[t]="",this.$forceUpdate()):i.previousElementSibling&&(i.previousElementSibling.focus(),this.input[t-1]=""):e.key==="Delete"?(this.input[t].length>0?this.input[t]="":i.nextElementSibling&&(this.input[1]=""),i.nextElementSibling&&i.nextElementSibling.focus()):e.key==="Home"?i.parentElement.children[0]&&i.parentElement.children[0].focus():e.key==="End"?i.parentElement.children[this.input.length-1]&&i.parentElement.children[this.input.length-1].focus():e.key==="ArrowLeft"?i.previousElementSibling&&i.previousElementSibling.focus():e.key==="ArrowRight"?i.nextElementSibling&&i.nextElementSibling.focus():e.key==="ArrowUp"?this.input[t]*1<9&&(this.input[t]=(this.input[t]*1+1).toString()):e.key==="ArrowDown"&&this.input[t]*1>0&&(this.input[t]=(this.input[t]*1-1).toString())},keyup(e){var t=e.target.dataset.index*1,i=e.target;i.value=i.value.replace(/Digit|Numpad/i,"").slice(0,1),/\d/i.test(i.value)?(this.input[t]=i.value||e.code.replace(/Digit|Numpad/i,""),i.nextElementSibling&&i.nextElementSibling.focus(),i.nextElementSibling||i.blur()):this.input[t]===""&&(this.input[t]=""),this.$emit("inputCode",this.input)},mousewheel(e){let t=e.target.dataset.index;e.wheelDelta>0?this.input[t]*1<9&&(this.input[t]=(this.input[t]*1+1).toString()):e.wheelDelta<0?this.input[t]*1>0&&(this.input[t]=(this.input[t]*1-1).toString()):e.key==="Enter"&&this.input.join("").length===O&&document.activeElement.blur(),this.$emit("inputCode",this.input)},paste(e){e.clipboardData.items[0].getAsString(t=>{t.toString().length===O?(this.pasteResult=t.split(""),document.activeElement.blur(),this.$emit("complete",this.input),this.pasteResult=[]):this.input[0]=new Array(O)})}}},ke={class:"input-box"};function Ie(e,t,i,o,s,r){return f(),g("div",ke,[n("form",null,[n("div",{class:"input-content",onKeydown:t[6]||(t[6]=(...a)=>r.keydown&&r.keydown(...a)),onKeyup:t[7]||(t[7]=(...a)=>r.keyup&&r.keyup(...a)),onPaste:t[8]||(t[8]=(...a)=>r.paste&&r.paste(...a)),onMousewheel:t[9]||(t[9]=(...a)=>r.mousewheel&&r.mousewheel(...a)),onInput:t[10]||(t[10]=(...a)=>r.inputEvent&&r.inputEvent(...a))},[I(n("input",{max:"9",min:"0",maxlength:"1","data-index":"0","onUpdate:modelValue":t[0]||(t[0]=a=>r.input[0]=a),ref:"firstinput",type:"password",autocomplete:"off"},null,512),[[E,r.input[0],void 0,{trim:!0,number:!0}]]),I(n("input",{max:"9",min:"0",maxlength:"1","data-index":"1","onUpdate:modelValue":t[1]||(t[1]=a=>r.input[1]=a),type:"password",autocomplete:"off"},null,512),[[E,r.input[1],void 0,{trim:!0,number:!0}]]),I(n("input",{max:"9",min:"0",maxlength:"1","data-index":"2","onUpdate:modelValue":t[2]||(t[2]=a=>r.input[2]=a),type:"password",autocomplete:"off"},null,512),[[E,r.input[2],void 0,{trim:!0,number:!0}]]),I(n("input",{max:"9",min:"0",maxlength:"1","data-index":"3","onUpdate:modelValue":t[3]||(t[3]=a=>r.input[3]=a),type:"password",autocomplete:"off"},null,512),[[E,r.input[3],void 0,{trim:!0,number:!0}]]),I(n("input",{max:"9",min:"0",maxlength:"1","data-index":"4","onUpdate:modelValue":t[4]||(t[4]=a=>r.input[4]=a),type:"password",autocomplete:"off"},null,512),[[E,r.input[4],void 0,{trim:!0,number:!0}]]),I(n("input",{max:"9",min:"0",maxlength:"1","data-index":"5","onUpdate:modelValue":t[5]||(t[5]=a=>r.input[5]=a),type:"password",autocomplete:"off"},null,512),[[E,r.input[5],void 0,{trim:!0,number:!0}]])],32)])])}var Ee=T(Se,[["render",Ie],["__scopeId","data-v-d2fdb29c"]]),Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUNJREFUOE+tkq1Pw1AUxc/dFoIANJ4EhyHB8JEsAbq2DtF1AoMCBPwDGBA4DG4KDGJrQzCEdm8TS2AYgkISPBoQhIwesi9oWVka4D557/m98859gj+WxOmXTGsqxdQOwPlOX64CCfZrF+7d9/k+QC5XWGDqvUrIjQjcloCEJeCMBOnlSqV0GYZEANmsNTI0jAdAzpTvbIQHNT1fBLjy9oqJet196fUiAM2wbEKOM3ge9zzvKQwwDGOsidFHAdeU55ZjAYumPZkOMK38cikuG023C8w0b6vnp/d9AM2wtwBuQiQ22E8gSQBHynMO2vH2GppuNSAym2ir5LXy3bkowLQbIP8XIECRhECwHnGW3IGsdoQ8+R1A0BESXVAXk9zBj5E2lOe0v/nXFsz8Lojt9osHFdE6h8p39iKAROuLGRp8WwLqB8wzihGxv7KVAAAAAElFTkSuQmCC",Oe="./assets/notify-s.34a88d05.png",$e="./assets/passwdTimes.676792c2.png",Xe="./assets/notify-e.399fe236.png",Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAd5JREFUOE+dkztoU2EYhp/v5IK41EEnQXBRsNDQJhWkiAjq4F6oIoIiTjpVUHNSKIakFRWFDoq4SAcvSzYRRETcQk40agXFQZyci0pz+185KScmIRb1377L+/7f5f2MgZea02iixRl5HEbs6ISNr+Z41oxzr5a3lV6IRcaeeSU3Nblh4hSwjKPkYnz0RMOJXZ4xAxyTsbyWYPbDvDXWuYEQvLnBE2Ck5Zh+s2hfBisL7ZSv7XF4aKL+M8nRkKRDMOFryWCqWWf/2+v2Yxg48qXPKsFWXsh4XS3YeZuc06hrU2mJVG3BPkWJ41nNGMwabJF4uvqdC5+XrN6tRKy0YkxZ5rJuCrYFC3YiAmcuaVwer5zH8Zj4JvEAuBsU7Wq3El+3zbFmaV/vJa5Ui/a4Jzht4kClaOdCXzqr+2a0KwU7HeVM5nTIiVuWzmpVMQ5W8xYM6z3ja68TzzFOVgtWinLGctqZcNQ2JMjktFuOMsbFoGB3ej/4TRC2APlqwR4NVpD2dQ2RCop2ZDDWbWHYEKPkiazG4jGsnLfaEPL1IYbSjbepxESq3LPGEJDx9VIiGRRtXy9BR1DRGjcSUkcj4AV5e/dHIfVJ2Rhptf9DyhFJ3zF5lJz+8pj6+vvHc/4FE0QPgAu17HIAAAAASUVORK5CYII=";const Ye={name:"SafeSetting",components:{Space:he,codeComponent:Ee,IscasInput:Ce},data(){return{mode:"changePassword",isOpen:!1,type:2,title:"",validateTypePassword:!1,oldPasswd:"",newPasswd:"",newDouPasswd:"",passwdErrorTimes:0,passwdError:!1,securityToken:"",emailToken:"",clientUuidBinder:"",isAdmin:!1}},mounted(){Q()&&(this.isAdmin=!0)},methods:{emitChangeEvent(){},showSafe(e){this.mode=e,this.isOpen=!0},init(){this.mode=="changePassword"&&(this.title=this.$t("safe.change_password"),this.type=2,this.sendPhoneConfirm()),this.reset()},reset(){this.$refs.codeComRef&&this.$refs.codeComRef.clear(),this.validateTypePassword=!1,this.passwdError=!1,this.passwdErrorTimes=0,this.securityToken="",this.clientUuidBinder="",this.oldPasswd="",this.newPasswd="",this.newDouPasswd=""},bindPhoneDisable(){clearTimeout(this.queryPhoneConfirmTimes),clearTimeout(this.phoneConfirmTimes),this.type=5},sendPhoneConfirm(){let e=this;pe().then(function(t){t.code==="ACC-200"?(e.queryPhoneConfirm(),e.phoneConfirmTimes=setTimeout(function(){clearTimeout(e.queryPhoneConfirmTimes),e.type=5},10*60*1e3)):t.code==="ACC-410"?e.type=15:e.type=5})},queryPhoneConfirm(){let e=this;e.queryPhoneConfirmTimes=setTimeout(function(){ce().then(function(t){let i=!0;if(t.code==="ACC-200"&&t.results.length>0){let o=t.results;for(let s of o)s.msgType.toLowerCase()==="security_passwd_mod_accept"&&(i=!1,clearTimeout(e.phoneConfirmTimes),s.accept?(e.securityToken=s.securityTokenRes.securityToken,e.clientUuidBinder=s.clientUuid,e.type=1):e.type=6)}i&&e.isOpen&&e.queryPhoneConfirm()})},2e3)},isIntNum(e){let t=/^\d+$/;return new RegExp(t).test(e)},settingPassword(){let e=this;if(e.newPasswd.length!==6||!this.isIntNum(e.newPasswd)){e.passwdError=this.$t("safe.password_only_tip");return}if(e.newPasswd!==e.newDouPasswd){e.passwdError=this.$t("safe.password_match");return}e.loading=D.service({target:".dialogBody",text:this.$t("safe.val_tip")}),e.passwdError=!1,this.type===1&&de(e.securityToken,e.clientUuidBinder,e.oldPasswd,e.newPasswd).then(function(t){e.loading.close(),t.code==="ACC-200"?(e.close(),X({message:e.$t("safe.change_password_suc"),type:"success",center:!0})):t.code==="ACC-403"?e.passwdError=e.$t("safe.old_password_err"):t.code==="ACC-4054"?e.passwdError=e.$t("safe.password_re_input"):t.code==="ACC-4053"?e.type=14:e.passwdError=t.message}),this.type===10&&ue(e.securityToken,e.emailToken,e.clientUuidBinder,e.newPasswd).then(function(t){e.loading.close(),t.code==="ACC-200"?(e.close(),X({message:e.$t("safe.reset_password_suc"),type:"success",center:!0})):t.code==="ACC-4054"?e.passwdError=e.$t("safe.password_re_input"):t.code==="ACC-4053"?e.type=14:e.passwdError=t.message})},validatePassword(){let e=this;if(e.oldPasswd.length!=6){e.passwdError=this.$t("safe.password_only_tip");return}e.loading=D.service({target:".dialogBody",text:this.$t("safe.val_tip")}),e.passwdError=!1,fe(e.oldPasswd).then(function(t){e.loading.close(),t.code==="ACC-200"?(e.securityToken=t.results.securityToken,e.type===2&&(e.type=0),e.type===11&&(e.type=8)):t.code==="ACC-403"?(e.passwdErrorTimes++,e.passwdErrorTimes<3?e.passwdError=e.$t("safe.password_error_num",3-e.passwdErrorTimes):e.type=13):t.code==="ACC-410"?e.type=13:e.passwdError=t.message})},closeDialog(){clearTimeout(this.phoneConfirmTimes),clearTimeout(this.queryPhoneConfirmTimes),this.loading&&this.loading.close()},close(){this.isOpen=!1},resetPasswd(){let e=this;e.passwdError=""},chooseType(){let e=this;e.validateTypePassword&&(e.type=11)},gotoSetp(e){this.type=e}}},z=e=>(N("data-v-3beaf2ef"),e=e(),P(),e),He={key:0,class:"safe"},We={class:"info"},Ne={class:"mb20 font12 wb"},Pe={class:"y-center"},ze={class:"card ml20"},Le={class:"title mb30"},Ue=z(()=>n("img",{src:Me},null,-1)),Be={class:"y-center"},De={class:"state"},Re={class:"ml-auto"},Ve={class:"m10 dialogBody"},Fe={key:0},je={class:"ml30 wb"},Ge={class:"content"},qe={style:{width:"100%"}},Qe={key:0,class:"color-red tl",style:{width:"300px","text-align":"right"}},Je={key:1},Ke={class:"confirm-div"},Ze={class:"content 1111"},et={class:"flex flex-column x-center"},tt=z(()=>n("div",null,[n("img",{src:Oe,style:{width:"100px",height:"100px"}})],-1)),st={class:"mt30 font20 fw-b"},it={class:"mt20 fw-b",style:{color:"#F6222D"}},ot={key:2},rt={class:"ml30 font16 fw-b"},nt={class:"content 2222"},at={class:"flex flex-column x-center"},lt={key:0,src:$e,style:{width:"100px",height:"100px"}},ht={key:1,src:Xe,style:{width:"100px",height:"100px"}},pt={key:0,class:"mt30 font20 fw-b"},ct={key:1,class:"mt30 font20 fw-b"},dt={class:"mt20 fw-b"},ut={class:"mt30 color-grey"},ft={key:3,class:"mt20 fw-b"},gt={class:"mt20 fw-b"},mt={class:"mt30 color-grey"},vt={key:5,class:"mt20 fw-b"},wt={key:6,class:"mt20 fw-b"},bt={class:"flex y-center"},yt={key:0,class:"ml20 color-blue"},xt=z(()=>n("img",{src:Te},null,-1)),Ct={class:"help",href:"https://ao.space/#/help/mail",target:"_blank"},_t={key:2,class:"ml-auto tr flex"};function At(e,t,i,o,s,r){const a=C("el-space"),l=C("el-col"),p=C("IscasInput"),u=C("el-row"),c=C("el-dialog");return s.isAdmin?(f(),g("div",He,[n("div",We,h(e.$t("setting.security")),1),n("div",Ne,h(e.$t("setting.security_desc")),1),n("div",Pe,[n("div",ze,[n("div",Le,[m(a,{size:5},{default:b(()=>[Ue,n("span",null,h(e.$t("setting.password")),1)]),_:1})]),n("div",Be,[n("div",null,[n("span",De,h(e.$t("setting.set")),1)]),n("div",Re,[n("span",{class:"link",onClick:t[0]||(t[0]=d=>r.showSafe("changePassword"))},h(e.$t("setting.change_password")),1)])])])]),m(c,{modelValue:s.isOpen,"onUpdate:modelValue":t[12]||(t[12]=d=>s.isOpen=d),title:s.title,onClose:r.closeDialog,onOpen:r.init,"close-on-click-modal":!1},{footer:b(()=>[n("div",bt,[s.type==0||s.type==7||s.type==8||s.type==9?(f(),g("div",yt,[m(a,null,{default:b(()=>[xt,n("a",Ct,h(e.$t("buttons.help")),1)]),_:1})])):v("",!0),s.type==5||s.type==6||s.type==12||s.type==13||s.type==14||s.type==15?(f(),g("div",{key:1,class:"button-blue ml-20",style:{margin:"0 auto"},onClick:t[5]||(t[5]=(...d)=>r.close&&r.close(...d))},h(e.$t("buttons.common_ok")),1)):(f(),g("div",_t,[s.type==7||s.type==11?(f(),g("div",{key:0,class:"button-white ml-20",onClick:t[6]||(t[6]=d=>r.gotoSetp(3))},h(e.$t("buttons.last_step")),1)):v("",!0),s.type==9?(f(),g("div",{key:1,class:"button-white ml-20",onClick:t[7]||(t[7]=d=>r.gotoSetp(1))},h(e.$t("buttons.last_step")),1)):v("",!0),s.type==3?(f(),g("div",{key:2,class:"button-white ml-20",onClick:t[8]||(t[8]=(...d)=>r.chooseType&&r.chooseType(...d))},h(e.$t("buttons.next_step")),1)):v("",!0),s.type==2||s.type==11?(f(),g("div",{key:3,class:"button-blue ml-20",onClick:t[9]||(t[9]=(...d)=>r.validatePassword&&r.validatePassword(...d))},h(e.$t("buttons.verification")),1)):v("",!0),s.type==1?(f(),g("div",{key:4,class:"button-blue ml-20",onClick:t[10]||(t[10]=(...d)=>r.settingPassword&&r.settingPassword(...d))},h(e.$t("buttons.verification")),1)):v("",!0),s.type==10?(f(),g("div",{key:5,class:"button-blue ml-20",onClick:t[11]||(t[11]=(...d)=>r.settingPassword&&r.settingPassword(...d))},h(e.$t("buttons.common_ok")),1)):v("",!0)]))])]),default:b(()=>[n("form",null,[n("div",Ve,[s.type===1||s.type==10?(f(),g("div",Fe,[n("div",je,h(e.$t("safe.password_desc")),1),n("div",Ge,[n("div",qe,[s.type==1?(f(),F(u,{key:0,class:"el-row-title",gutter:10},{default:b(()=>[m(l,{span:8},{default:b(()=>[$(h(e.$t("safe.old_password")),1)]),_:1}),m(l,{span:16},{default:b(()=>[m(p,{modelValue:s.oldPasswd,"onUpdate:modelValue":t[1]||(t[1]=d=>s.oldPasswd=d),placeholder:e.$t("safe.password_tip"),type:"password"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})):v("",!0),m(u,{class:"el-row-title",gutter:10},{default:b(()=>[m(l,{span:8},{default:b(()=>[$(h(e.$t("safe.new_password")),1)]),_:1}),m(l,{span:16},{default:b(()=>[m(p,{modelValue:s.newPasswd,"onUpdate:modelValue":t[2]||(t[2]=d=>s.newPasswd=d),placeholder:e.$t("safe.password_tip"),type:"password"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),m(u,{class:"el-row-title",gutter:10},{default:b(()=>[m(l,{span:8},{default:b(()=>[$(h(e.$t("safe.repeat_password")),1)]),_:1}),m(l,{span:16},{default:b(()=>[m(p,{modelValue:s.newDouPasswd,"onUpdate:modelValue":t[3]||(t[3]=d=>s.newDouPasswd=d),placeholder:e.$t("safe.repeat_tip"),type:"password"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),m(u,{class:"el-row-title",gutter:10},{default:b(()=>[m(l,{span:8}),m(l,{span:16},{default:b(()=>[s.passwdError?(f(),g("div",Qe,h(s.passwdError),1)):v("",!0)]),_:1})]),_:1})])])])):v("",!0),s.type===4?(f(),g("div",Je,[n("div",Ke,h(e.$t("setting.confirm_msg"))+"\u3002",1),n("div",Ze,[n("div",et,[tt,n("span",st,h(e.$t("safe.please_confirm")),1),n("span",it,"* "+h(e.$t("setting.confirm_msg_two")),1),n("span",{class:"mt30 color-blue pointer",onClick:t[4]||(t[4]=(...d)=>r.bindPhoneDisable&&r.bindPhoneDisable(...d))},h(e.$t("safe.bound_phone_error")),1)])])])):v("",!0),s.type==5||s.type==6||s.type==12||s.type==13||s.type==14||s.type==15?(f(),g("div",ot,[n("div",rt,h(e.$t("safe.safe_password_val"))+"\uFF1A",1),n("div",nt,[n("div",at,[n("div",null,[s.type==13||s.type==14?(f(),g("img",lt)):(f(),g("img",ht))]),s.type==13?(f(),g("span",pt,h(e.$t("safe.password_error")),1)):(f(),g("span",ct,h(e.$t("safe.cannot_opa")),1)),s.type==5?(f(),g(U,{key:2},[n("span",dt,h(e.$t("safe.admin_cannot")),1),n("span",ut,h(e.$t("safe.bound_new_phone")),1)],64)):v("",!0),s.type==6?(f(),g("span",ft,h(e.$t("safe.bound_reject")),1)):v("",!0),s.type==12?(f(),g(U,{key:4},[n("span",gt,h(e.$t("safe.unbound_email")),1),n("span",mt,h(e.$t("safe.reset_desc")),1)],64)):v("",!0),s.type==14?(f(),g("span",vt,h(e.$t("safe.opa_timeout")),1)):v("",!0),s.type==15?(f(),g("span",wt,h(e.$t("safe.request_times")),1)):v("",!0)])])])):v("",!0)])])]),_:1},8,["modelValue","title","onClose","onOpen"])])):v("",!0)}var St=T(Ye,[["render",At],["__scopeId","data-v-3beaf2ef"]]);const kt=j({data(){return{dataList:[]}},mounted(){this.queryData()},methods:{queryData(){let e=this;Promise.all([ge(),me()]).then(t=>{let[i,o]=t,s=localStorage.getItem("clientUUID"),r=o&&(o==null?void 0:o.results[0]);i.results.forEach(l=>{l.uuid==s&&(l.isSelf=!0),l.uuid==r.clientUUID&&(l.isBangding=!0)}),e.dataList=i.results})},parseTime(e){return J(e).format("YYYY-MM-DD HH:mm:ss")},dealAddress(e){return e&&e.split("|")[3]},offline(e){_e({title:this.$t("setting.offline_terminal"),content:this.$t("setting.offline_confirm"),sure:()=>{ve({aoid:e.aoid,clientUUID:e.uuid}).then(t=>{t.code=="ACC-200"||t.code=="ACC-4034"?(X.success(this.$t("setting.offline_success")),this.queryData()):(X.error(this.$t("setting.offline_fail",{error:K[t.code]||t.message})),this.queryData())})},cancel:()=>{console.log("\u53D6\u6D88")}})}}}),It={class:"notify-container"},Et={class:"title mt20 mb20 wb"},Mt={class:"color-blue"},Ot={class:"y-center"},$t={key:0,class:"little-title"},Xt={key:1,class:"little-title"},Tt=["onClick"];function Yt(e,t,i,o,s,r){const a=C("el-table-column"),l=C("el-table");return f(),g("div",It,[n("div",Et,[$(h(e.$t("setting.terminal_desc"))+" ",1),n("span",Mt,h(e.$t("setting.ip_reference")),1)]),m(l,{stripe:"",data:e.dataList},{default:b(()=>[m(a,{label:e.$t("setting.terminal_name"),width:"240"},{default:b(p=>[n("div",Ot,[n("span",null,h(p.row.terminalModel),1),p.row.isSelf?(f(),g("div",$t,h(e.$t("setting.current_device")),1)):v("",!0),p.row.isBangding?(f(),g("div",Xt,h(e.$t("setting.bound_device")),1)):v("",!0)])]),_:1},8,["label"]),m(a,{prop:"terminalType",label:e.$t("setting.terminal_type"),width:"150"},null,8,["label"]),m(a,{label:e.$t("setting.login_location"),width:"150"},{default:b(p=>[$(h(e.dealAddress(p.row.address)),1)]),_:1},8,["label"]),m(a,{label:e.$t("setting.login_last_time"),width:"200"},{default:b(p=>[$(h(e.parseTime(p.row.loginTime)),1)]),_:1},8,["label"]),m(a,{label:e.$t("setting.operation")},{default:b(p=>[!p.row.isSelf&&!p.row.isBangding?(f(),g("span",{key:0,class:"xiaxian pointer",onClick:u=>e.offline(p.row)},h(e.$t("setting.offline")),9,Tt)):v("",!0)]),_:1},8,["label"])]),_:1},8,["data"])])}var Ht=T(kt,[["render",Yt],["__scopeId","data-v-6e536688"]]);const G={};G.getData=e=>new Promise((t,i)=>{let o={};Wt(e).then(s=>{o.arrayBuffer=s,o.orientation=Lt(s),t(o)}).catch(s=>{i(s)})});function Wt(e){let t=null;return new Promise((i,o)=>{if(e.src)if(/^data\:/i.test(e.src))t=Pt(e.src),i(t);else if(/^blob\:/i.test(e.src)){var s=new FileReader;s.onload=function(a){t=a.target.result,i(t)},Nt(e.src,function(a){s.readAsArrayBuffer(a)})}else{var r=new XMLHttpRequest;r.onload=function(){if(this.status==200||this.status===0)t=r.response,i(t);else throw"Could not load image";r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else o("img error")})}function Nt(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(o){(this.status==200||this.status===0)&&t(this.response)},i.send()}function Pt(e){e=e.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var t=atob(e),i=t.length,o=new ArrayBuffer(i),s=new Uint8Array(o),r=0;r<i;r++)s[r]=t.charCodeAt(r);return o}function zt(e,t,i){var o="",s;for(s=t,i+=t;s<i;s++)o+=String.fromCharCode(e.getUint8(s));return o}function Lt(e){var t=new DataView(e),i=t.byteLength,o,s,r,a,l,p,u,c,d,w;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(d=2;d<i;){if(t.getUint8(d)===255&&t.getUint8(d+1)===225){u=d;break}d++}if(u&&(s=u+4,r=u+10,zt(t,s,4)==="Exif"&&(p=t.getUint16(r),l=p===18761,(l||p===19789)&&t.getUint16(r+2,l)===42&&(a=t.getUint32(r+4,l),a>=8&&(c=r+a)))),c){for(i=t.getUint16(c,l),w=0;w<i;w++)if(d=c+w*12+2,t.getUint16(d,l)===274){d+=8,o=t.getUint16(d,l);break}}return o}var Ut=(e,t)=>{const i=e.__vccOpts||e;for(const[o,s]of t)i[o]=s;return i};const Bt=j({data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:()=>[1,1]},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:()=>10}},computed:{cropInfo(){let e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){let t=1;this.high&&!this.full&&(t=window.devicePixelRatio),this.enlarge!==1&!this.full&&(t=Math.abs(Number(this.enlarge))),e.width=e.width*t,e.height=e.height*t,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE(){return!!window.ActiveXObject||"ActiveXObject"in window},passive(){return this.isIE?null:{passive:!1}}},watch:{img(){this.checkedImg()},imgs(e){e!==""&&this.reload()},cropW(){this.showPreview()},cropH(){this.showPreview()},cropOffsertX(){this.showPreview()},cropOffsertY(){this.showPreview()},scale(e,t){this.showPreview()},x(){this.showPreview()},y(){this.showPreview()},autoCrop(e){e&&this.goAutoCrop()},autoCropWidth(){this.autoCrop&&this.goAutoCrop()},autoCropHeight(){this.autoCrop&&this.goAutoCrop()},mode(){this.checkedImg()},rotate(){this.showPreview(),this.autoCrop?this.goAutoCrop(this.cropW,this.cropH):(this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion(e){var t=navigator.userAgent.split(" "),i="";let o=0;const s=new RegExp(e,"i");for(var r=0;r<t.length;r++)s.test(t[r])&&(i=t[r]);return i?o=i.split("/")[1].split("."):o=["0","0","0"],o},checkOrientationImage(e,t,i,o){if(this.getVersion("chrome")[0]>=81)t=-1;else if(this.getVersion("safari")[0]>=605){const a=this.getVersion("version");a[0]>13&&a[1]>1&&(t=-1)}else{const a=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(a){let l=a[1];l=l.split("_"),(l[0]>13||l[0]>=13&&l[1]>=4)&&(t=-1)}}let s=document.createElement("canvas"),r=s.getContext("2d");switch(r.save(),t){case 2:s.width=i,s.height=o,r.translate(i,0),r.scale(-1,1);break;case 3:s.width=i,s.height=o,r.translate(i/2,o/2),r.rotate(180*Math.PI/180),r.translate(-i/2,-o/2);break;case 4:s.width=i,s.height=o,r.translate(0,o),r.scale(1,-1);break;case 5:s.height=i,s.width=o,r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:s.width=o,s.height=i,r.translate(o/2,i/2),r.rotate(90*Math.PI/180),r.translate(-i/2,-o/2);break;case 7:s.height=i,s.width=o,r.rotate(.5*Math.PI),r.translate(i,-o),r.scale(-1,1);break;case 8:s.height=i,s.width=o,r.translate(o/2,i/2),r.rotate(-90*Math.PI/180),r.translate(-i/2,-o/2);break;default:s.width=i,s.height=o}r.drawImage(e,0,0,i,o),r.restore(),s.toBlob(a=>{let l=URL.createObjectURL(a);URL.revokeObjectURL(this.imgs),this.imgs=l},"image/"+this.outputType,1)},checkedImg(){if(this.img===null||this.img===""){this.imgs="",this.clearCrop();return}this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();let e=new Image;if(e.onload=()=>{if(this.img==="")return this.$emit("img-load","error"),!1;let i=e.width,o=e.height;G.getData(e).then(s=>{this.orientation=s.orientation||1;let r=Number(this.maxImgSize);if(!this.orientation&&i<r&o<r){this.imgs=this.img;return}i>r&&(o=o/i*r,i=r),o>r&&(i=i/o*r,o=r),this.checkOrientationImage(e,this.orientation,i,o)})},e.onerror=()=>{this.$emit("img-load","error")},this.img.substr(0,4)!=="data"&&(e.crossOrigin=""),this.isIE){var t=new XMLHttpRequest;t.onload=function(){var i=URL.createObjectURL(this.response);e.src=i},t.open("GET",this.img,!0),t.responseType="blob",t.send()}else e.src=this.img},startMove(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in e?e.clientX:e.touches[0].clientX)-this.x,this.moveY=("clientY"in e?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),e.touches.length==2&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("imgMoving",{moving:!0,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale(e){e.preventDefault();let t=this.scale;var i={x:this.touches[0].clientX,y:this.touches[0].clientY},o={x:e.touches[0].clientX,y:e.touches[0].clientY},s={x:this.touches[1].clientX,y:this.touches[1].clientY},r={x:e.touches[1].clientX,y:e.touches[1].clientY},a=Math.sqrt(Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2)),l=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),p=l-a,u=1;u=u/this.trueWidth>u/this.trueHeight?u/this.trueHeight:u/this.trueWidth,u=u>.1?.1:u;var c=u*p;if(!this.touchNow){if(this.touchNow=!0,p>0?t+=Math.abs(c):p<0&&t>Math.abs(c)&&(t-=Math.abs(c)),this.touches=e.touches,setTimeout(()=>{this.touchNow=!1},8),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t}},cancelTouchScale(e){window.removeEventListener("touchmove",this.touchScale)},moveImg(e){if(e.preventDefault(),e.touches&&e.touches.length===2)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;let t="clientX"in e?e.clientX:e.touches[0].clientX,i="clientY"in e?e.clientY:e.touches[0].clientY,o,s;o=t-this.moveX,s=i-this.moveY,this.$nextTick(()=>{if(this.centerBox){let r=this.getImgAxis(o,s,this.scale),a=this.getCropAxis(),l=this.trueHeight*this.scale,p=this.trueWidth*this.scale,u,c,d,w;switch(this.rotate){case 1:case-1:case 3:case-3:u=this.cropOffsertX-this.trueWidth*(1-this.scale)/2+(l-p)/2,c=this.cropOffsertY-this.trueHeight*(1-this.scale)/2+(p-l)/2,d=u-l+this.cropW,w=c-p+this.cropH;break;default:u=this.cropOffsertX-this.trueWidth*(1-this.scale)/2,c=this.cropOffsertY-this.trueHeight*(1-this.scale)/2,d=u-p+this.cropW,w=c-l+this.cropH;break}r.x1>=a.x1&&(o=u),r.y1>=a.y1&&(s=c),r.x2<=a.x2&&(o=d),r.y2<=a.y2&&(s=w)}this.x=o,this.y=s,this.$emit("imgMoving",{moving:!0,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})})},leaveImg(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("imgMoving",{moving:!1,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize(e){e.preventDefault();let t=this.scale;var i=e.deltaY||e.wheelDelta,o=navigator.userAgent.indexOf("Firefox");i=o>0?i*30:i,this.isIE&&(i=-i);var s=this.coe;s=s/this.trueWidth>s/this.trueHeight?s/this.trueHeight:s/this.trueWidth;var r=s*i;r<0?t+=Math.abs(r):t>Math.abs(r)&&(t-=Math.abs(r));let a=r<0?"add":"reduce";if(a!==this.coeStatus&&(this.coeStatus=a,this.coe=.2),this.scaling||(this.scalingSet=setTimeout(()=>{this.scaling=!1,this.coe=this.coe+=.01},50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},changeScale(e){let t=this.scale;e=e||1;var i=20;if(i=i/this.trueWidth>i/this.trueHeight?i/this.trueHeight:i/this.trueWidth,e=e*i,e>0?t+=Math.abs(e):t>Math.abs(e)&&(t-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},createCrop(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,i="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick(()=>{var o=t-this.cropX,s=i-this.cropY;if(o>0?(this.cropW=o+this.cropChangeX>this.w?this.w-this.cropChangeX:o,this.cropOffsertX=this.cropChangeX):(this.cropW=this.w-this.cropChangeX+Math.abs(o)>this.w?this.cropChangeX:Math.abs(o),this.cropOffsertX=this.cropChangeX+o>0?this.cropChangeX+o:0),!this.fixed)s>0?(this.cropH=s+this.cropChangeY>this.h?this.h-this.cropChangeY:s,this.cropOffsertY=this.cropChangeY):(this.cropH=this.h-this.cropChangeY+Math.abs(s)>this.h?this.cropChangeY:Math.abs(s),this.cropOffsertY=this.cropChangeY+s>0?this.cropChangeY+s:0);else{var r=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];r+this.cropOffsertY>this.h?(this.cropH=this.h-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],o>0?this.cropOffsertX=this.cropChangeX:this.cropOffsertX=this.cropChangeX-this.cropW):this.cropH=r,this.cropOffsertY=this.cropOffsertY}})},changeCropSize(e,t,i,o,s){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=t,this.canChangeY=i,this.changeCropTypeX=o,this.changeCropTypeY=s,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,i="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;let o=this.w,s=this.h,r=0,a=0;if(this.centerBox){let l=this.getImgAxis(),p=l.x2,u=l.y2;r=l.x1>0?l.x1:0,a=l.y1>0?l.y1:0,o>p&&(o=p),s>u&&(s=u)}this.$nextTick(()=>{var l=t-this.cropX,p=i-this.cropY;if(this.canChangeX&&(this.changeCropTypeX===1?this.cropOldW-l>0?(this.cropW=o-this.cropChangeX-l<=o-r?this.cropOldW-l:this.cropOldW+this.cropChangeX-r,this.cropOffsertX=o-this.cropChangeX-l<=o-r?this.cropChangeX+l:r):(this.cropW=Math.abs(l)+this.cropChangeX<=o?Math.abs(l)-this.cropOldW:o-this.cropOldW-this.cropChangeX,this.cropOffsertX=this.cropChangeX+this.cropOldW):this.changeCropTypeX===2&&(this.cropOldW+l>0?(this.cropW=this.cropOldW+l+this.cropOffsertX<=o?this.cropOldW+l:o-this.cropOffsertX,this.cropOffsertX=this.cropChangeX):(this.cropW=o-this.cropChangeX+Math.abs(l+this.cropOldW)<=o-r?Math.abs(l+this.cropOldW):this.cropChangeX-r,this.cropOffsertX=o-this.cropChangeX+Math.abs(l+this.cropOldW)<=o-r?this.cropChangeX-Math.abs(l+this.cropOldW):r))),this.canChangeY&&(this.changeCropTypeY===1?this.cropOldH-p>0?(this.cropH=s-this.cropChangeY-p<=s-a?this.cropOldH-p:this.cropOldH+this.cropChangeY-a,this.cropOffsertY=s-this.cropChangeY-p<=s-a?this.cropChangeY+p:a):(this.cropH=Math.abs(p)+this.cropChangeY<=s?Math.abs(p)-this.cropOldH:s-this.cropOldH-this.cropChangeY,this.cropOffsertY=this.cropChangeY+this.cropOldH):this.changeCropTypeY===2&&(this.cropOldH+p>0?(this.cropH=this.cropOldH+p+this.cropOffsertY<=s?this.cropOldH+p:s-this.cropOffsertY,this.cropOffsertY=this.cropChangeY):(this.cropH=s-this.cropChangeY+Math.abs(p+this.cropOldH)<=s-a?Math.abs(p+this.cropOldH):this.cropChangeY-a,this.cropOffsertY=s-this.cropChangeY+Math.abs(p+this.cropOldH)<=s-a?this.cropChangeY-Math.abs(p+this.cropOldH):a))),this.canChangeX&&this.fixed){var u=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];u+this.cropOffsertY>s?(this.cropH=s-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0]):this.cropH=u}if(this.canChangeY&&this.fixed){var c=this.cropH/this.fixedNumber[1]*this.fixedNumber[0];c+this.cropOffsertX>o?(this.cropW=o-this.cropOffsertX,this.cropH=this.cropW/this.fixedNumber[0]*this.fixedNumber[1]):this.cropW=c}})},checkCropLimitSize(){let{cropW:e,cropH:t,limitMinSize:i}=this,o=new Array;return Array.isArray[i]?o=i:o=[i,i],e=parseFloat(o[0]),t=parseFloat(o[1]),[e,t]},changeCropEnd(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},endCrop(){this.cropW===0&&this.cropH===0&&(this.cropping=!1),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop(){this.crop=!0},stopCrop(){this.crop=!1},clearCrop(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&e.touches.length===2)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);let t="clientX"in e?e.clientX:e.touches[0].clientX,i="clientY"in e?e.clientY:e.touches[0].clientY,o,s;o=t-this.cropOffsertX,s=i-this.cropOffsertY,this.cropX=o,this.cropY=s,this.$emit("cropMoving",{moving:!0,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop(e,t){let i=0,o=0;e&&(e.preventDefault(),i="clientX"in e?e.clientX:e.touches[0].clientX,o="clientY"in e?e.clientY:e.touches[0].clientY),this.$nextTick(()=>{let s,r,a=i-this.cropX,l=o-this.cropY;if(t&&(a=this.cropOffsertX,l=this.cropOffsertY),a<=0?s=0:a+this.cropW>this.w?s=this.w-this.cropW:s=a,l<=0?r=0:l+this.cropH>this.h?r=this.h-this.cropH:r=l,this.centerBox){let p=this.getImgAxis();s<=p.x1&&(s=p.x1),s+this.cropW>p.x2&&(s=p.x2-this.cropW),r<=p.y1&&(r=p.y1),r+this.cropH>p.y2&&(r=p.y2-this.cropH)}this.cropOffsertX=s,this.cropOffsertY=r,this.$emit("cropMoving",{moving:!0,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})})},getImgAxis(e,t,i){e=e||this.x,t=t||this.y,i=i||this.scale;let o={x1:0,x2:0,y1:0,y2:0},s=this.trueWidth*i,r=this.trueHeight*i;switch(this.rotate){case 0:o.x1=e+this.trueWidth*(1-i)/2,o.x2=o.x1+this.trueWidth*i,o.y1=t+this.trueHeight*(1-i)/2,o.y2=o.y1+this.trueHeight*i;break;case 1:case-1:case 3:case-3:o.x1=e+this.trueWidth*(1-i)/2+(s-r)/2,o.x2=o.x1+this.trueHeight*i,o.y1=t+this.trueHeight*(1-i)/2+(r-s)/2,o.y2=o.y1+this.trueWidth*i;break;default:o.x1=e+this.trueWidth*(1-i)/2,o.x2=o.x1+this.trueWidth*i,o.y1=t+this.trueHeight*(1-i)/2,o.y2=o.y1+this.trueHeight*i;break}return o},getCropAxis(){let e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("cropMoving",{moving:!1,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked(e){let t=document.createElement("canvas"),i=new Image,o=this.rotate,s=this.trueWidth,r=this.trueHeight,a=this.cropOffsertX,l=this.cropOffsertY;i.onload=()=>{if(this.cropW!==0){let c=t.getContext("2d"),d=1;this.high&!this.full&&(d=window.devicePixelRatio),this.enlarge!==1&!this.full&&(d=Math.abs(Number(this.enlarge)));let w=this.cropW*d,k=this.cropH*d,y=s*this.scale*d,x=r*this.scale*d,_=(this.x-a+this.trueWidth*(1-this.scale)/2)*d,A=(this.y-l+this.trueHeight*(1-this.scale)/2)*d;switch(u(w,k),c.save(),o){case 0:this.full?(u(w/this.scale,k/this.scale),c.drawImage(i,_/this.scale,A/this.scale,y/this.scale,x/this.scale)):c.drawImage(i,_,A,y,x);break;case 1:case-3:this.full?(u(w/this.scale,k/this.scale),_=_/this.scale+(y/this.scale-x/this.scale)/2,A=A/this.scale+(x/this.scale-y/this.scale)/2,c.rotate(o*90*Math.PI/180),c.drawImage(i,A,-_-x/this.scale,y/this.scale,x/this.scale)):(_=_+(y-x)/2,A=A+(x-y)/2,c.rotate(o*90*Math.PI/180),c.drawImage(i,A,-_-x,y,x));break;case 2:case-2:this.full?(u(w/this.scale,k/this.scale),c.rotate(o*90*Math.PI/180),_=_/this.scale,A=A/this.scale,c.drawImage(i,-_-y/this.scale,-A-x/this.scale,y/this.scale,x/this.scale)):(c.rotate(o*90*Math.PI/180),c.drawImage(i,-_-y,-A-x,y,x));break;case 3:case-1:this.full?(u(w/this.scale,k/this.scale),_=_/this.scale+(y/this.scale-x/this.scale)/2,A=A/this.scale+(x/this.scale-y/this.scale)/2,c.rotate(o*90*Math.PI/180),c.drawImage(i,-A-y/this.scale,_,y/this.scale,x/this.scale)):(_=_+(y-x)/2,A=A+(x-y)/2,c.rotate(o*90*Math.PI/180),c.drawImage(i,-A-y,_,y,x));break;default:this.full?(u(w/this.scale,k/this.scale),c.drawImage(i,_/this.scale,A/this.scale,y/this.scale,x/this.scale)):c.drawImage(i,_,A,y,x)}c.restore()}else{let c=s*this.scale,d=r*this.scale,w=t.getContext("2d");switch(w.save(),o){case 0:u(c,d),w.drawImage(i,0,0,c,d);break;case 1:case-3:u(d,c),w.rotate(o*90*Math.PI/180),w.drawImage(i,0,-d,c,d);break;case 2:case-2:u(c,d),w.rotate(o*90*Math.PI/180),w.drawImage(i,-c,-d,c,d);break;case 3:case-1:u(d,c),w.rotate(o*90*Math.PI/180),w.drawImage(i,-c,0,c,d);break;default:u(c,d),w.drawImage(i,0,0,c,d)}w.restore()}e(t)};var p=this.img.substr(0,4);p!=="data"&&(i.crossOrigin="Anonymous"),i.src=this.imgs;function u(c,d){t.width=Math.round(c),t.height=Math.round(d)}},getCropData(e){this.getCropChecked(t=>{e(t.toDataURL("image/"+this.outputType,this.outputSize))})},getCropBlob(e){this.getCropChecked(t=>{t.toBlob(i=>e(i),"image/"+this.outputType,this.outputSize)})},showPreview(){if(this.isCanShow)this.isCanShow=!1,setTimeout(()=>{this.isCanShow=!0},16);else return!1;let e=this.cropW,t=this.cropH,i=this.scale;var o={};o.div={width:`${e}px`,height:`${t}px`};let s=(this.x-this.cropOffsertX)/i,r=(this.y-this.cropOffsertY)/i,a=0;o.w=e,o.h=t,o.url=this.imgs,o.img={width:`${this.trueWidth}px`,height:`${this.trueHeight}px`,transform:`scale(${i})translate3d(${s}px, ${r}px, ${a}px)rotateZ(${this.rotate*90}deg)`},o.html=`
      <div class="show-preview" style="width: ${o.w}px; height: ${o.h}px,; overflow: hidden">
        <div style="width: ${e}px; height: ${t}px">
          <img src=${o.url} style="width: ${this.trueWidth}px; height: ${this.trueHeight}px; transform:
          scale(${i})translate3d(${s}px, ${r}px, ${a}px)rotateZ(${this.rotate*90}deg)">
        </div>
      </div>`,this.$emit("realTime",o),this.$emit("real-time",o)},reload(){let e=new Image;e.onload=()=>{this.w=parseFloat(window.getComputedStyle(this.$refs.cropper).width),this.h=parseFloat(window.getComputedStyle(this.$refs.cropper).height),this.trueWidth=e.width,this.trueHeight=e.height,this.original?this.scale=1:this.scale=this.checkedMode(),this.$nextTick(()=>{this.x=-(this.trueWidth-this.trueWidth*this.scale)/2+(this.w-this.trueWidth*this.scale)/2,this.y=-(this.trueHeight-this.trueHeight*this.scale)/2+(this.h-this.trueHeight*this.scale)/2,this.loading=!1,this.autoCrop&&this.goAutoCrop(),this.$emit("img-load","success"),this.$emit("imgLoad","success"),setTimeout(()=>{this.showPreview()},20)})},e.onerror=()=>{this.$emit("imgLoad","error"),this.$emit("img-load","error")},e.src=this.imgs},checkedMode(){let e=1,t=this.trueWidth,i=this.trueHeight;const o=this.mode.split(" ");switch(o[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":t=this.w,e=t/this.trueWidth,i=i*e,i<this.h&&(i=this.h,e=i/this.trueHeight);break;default:try{let s=o[0];if(s.search("px")!==-1){s=s.replace("px",""),t=parseFloat(s);const r=t/this.trueWidth;let a=1,l=o[1];l.search("px")!==-1&&(l=l.replace("px",""),i=parseFloat(l),a=i/this.trueHeight),e=Math.min(r,a)}if(s.search("%")!==-1&&(s=s.replace("%",""),t=parseFloat(s)/100*this.w,e=t/this.trueWidth),o.length===2&&s==="auto"){let r=o[1];r.search("px")!==-1&&(r=r.replace("px",""),i=parseFloat(r),e=i/this.trueHeight),r.search("%")!==-1&&(r=r.replace("%",""),i=parseFloat(r)/100*this.h,e=i/this.trueHeight)}}catch{e=1}}return e},goAutoCrop(e,t){if(this.imgs===""||this.imgs===null)return;this.clearCrop(),this.cropping=!0;let i=this.w,o=this.h;if(this.centerBox){const a=Math.abs(this.rotate)%2>0;let l=(a?this.trueHeight:this.trueWidth)*this.scale,p=(a?this.trueWidth:this.trueHeight)*this.scale;i=l<i?l:i,o=p<o?p:o}var s=e||parseFloat(this.autoCropWidth),r=t||parseFloat(this.autoCropHeight);(s===0||r===0)&&(s=i*.8,r=o*.8),s=s>i?i:s,r=r>o?o:r,this.fixed&&(r=s/this.fixedNumber[0]*this.fixedNumber[1]),r>this.h&&(r=this.h,s=r/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(s,r)},changeCrop(e,t){if(this.centerBox){let i=this.getImgAxis();e>i.x2-i.x1&&(e=i.x2-i.x1,t=e/this.fixedNumber[0]*this.fixedNumber[1]),t>i.y2-i.y1&&(t=i.y2-i.y1,e=t/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=t,this.checkCropLimitSize(),this.$nextTick(()=>{this.cropOffsertX=(this.w-this.cropW)/2,this.cropOffsertY=(this.h-this.cropH)/2,this.centerBox&&this.moveCrop(null,!0)})},refresh(){this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick(()=>{this.checkedImg()})},rotateLeft(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear(){this.rotate=0},checkoutImgAxis(e,t,i){e=e||this.x,t=t||this.y,i=i||this.scale;let o=!0;if(this.centerBox){let s=this.getImgAxis(e,t,i),r=this.getCropAxis();s.x1>=r.x1&&(o=!1),s.x2<=r.x2&&(o=!1),s.y1>=r.y1&&(o=!1),s.y2<=r.y2&&(o=!1)}return o}},mounted(){this.support="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";let e=this;var t=navigator.userAgent;this.isIOS=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(i,o,s){for(var r=atob(this.toDataURL(o,s).split(",")[1]),a=r.length,l=new Uint8Array(a),p=0;p<a;p++)l[p]=r.charCodeAt(p);i(new Blob([l],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},destroyed(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}}),Dt={key:0,class:"cropper-box"},Rt=["src"],Vt={class:"cropper-view-box"},Ft=["src"],jt={key:1};function Gt(e,t,i,o,s,r){return f(),g("div",{class:"vue-cropper",ref:"cropper",onMouseover:t[28]||(t[28]=(...a)=>e.scaleImg&&e.scaleImg(...a)),onMouseout:t[29]||(t[29]=(...a)=>e.cancelScale&&e.cancelScale(...a))},[e.imgs?(f(),g("div",Dt,[I(n("div",{class:"cropper-box-canvas",style:S({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"})},[n("img",{src:e.imgs,alt:"cropper-img",ref:"cropperImg"},null,8,Rt)],4),[[B,!e.loading]])])):v("",!0),n("div",{class:le(["cropper-drag-box",{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping}]),onMousedown:t[0]||(t[0]=(...a)=>e.startMove&&e.startMove(...a)),onTouchstart:t[1]||(t[1]=(...a)=>e.startMove&&e.startMove(...a))},null,34),I(n("div",{class:"cropper-crop-box",style:S({width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"})},[n("span",Vt,[n("img",{style:S({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"}),src:e.imgs,alt:"cropper-img"},null,12,Ft)]),n("span",{class:"cropper-face cropper-move",onMousedown:t[2]||(t[2]=(...a)=>e.cropMove&&e.cropMove(...a)),onTouchstart:t[3]||(t[3]=(...a)=>e.cropMove&&e.cropMove(...a))},null,32),e.info?(f(),g("span",{key:0,class:"crop-info",style:S({top:e.cropInfo.top})},h(e.cropInfo.width)+" \xD7 "+h(e.cropInfo.height),5)):v("",!0),e.fixedBox?v("",!0):(f(),g("span",jt,[n("span",{class:"crop-line line-w",onMousedown:t[4]||(t[4]=a=>e.changeCropSize(a,!1,!0,0,1)),onTouchstart:t[5]||(t[5]=a=>e.changeCropSize(a,!1,!0,0,1))},null,32),n("span",{class:"crop-line line-a",onMousedown:t[6]||(t[6]=a=>e.changeCropSize(a,!0,!1,1,0)),onTouchstart:t[7]||(t[7]=a=>e.changeCropSize(a,!0,!1,1,0))},null,32),n("span",{class:"crop-line line-s",onMousedown:t[8]||(t[8]=a=>e.changeCropSize(a,!1,!0,0,2)),onTouchstart:t[9]||(t[9]=a=>e.changeCropSize(a,!1,!0,0,2))},null,32),n("span",{class:"crop-line line-d",onMousedown:t[10]||(t[10]=a=>e.changeCropSize(a,!0,!1,2,0)),onTouchstart:t[11]||(t[11]=a=>e.changeCropSize(a,!0,!1,2,0))},null,32),n("span",{class:"crop-point point1",onMousedown:t[12]||(t[12]=a=>e.changeCropSize(a,!0,!0,1,1)),onTouchstart:t[13]||(t[13]=a=>e.changeCropSize(a,!0,!0,1,1))},null,32),n("span",{class:"crop-point point2",onMousedown:t[14]||(t[14]=a=>e.changeCropSize(a,!1,!0,0,1)),onTouchstart:t[15]||(t[15]=a=>e.changeCropSize(a,!1,!0,0,1))},null,32),n("span",{class:"crop-point point3",onMousedown:t[16]||(t[16]=a=>e.changeCropSize(a,!0,!0,2,1)),onTouchstart:t[17]||(t[17]=a=>e.changeCropSize(a,!0,!0,2,1))},null,32),n("span",{class:"crop-point point4",onMousedown:t[18]||(t[18]=a=>e.changeCropSize(a,!0,!1,1,0)),onTouchstart:t[19]||(t[19]=a=>e.changeCropSize(a,!0,!1,1,0))},null,32),n("span",{class:"crop-point point5",onMousedown:t[20]||(t[20]=a=>e.changeCropSize(a,!0,!1,2,0)),onTouchstart:t[21]||(t[21]=a=>e.changeCropSize(a,!0,!1,2,0))},null,32),n("span",{class:"crop-point point6",onMousedown:t[22]||(t[22]=a=>e.changeCropSize(a,!0,!0,1,2)),onTouchstart:t[23]||(t[23]=a=>e.changeCropSize(a,!0,!0,1,2))},null,32),n("span",{class:"crop-point point7",onMousedown:t[24]||(t[24]=a=>e.changeCropSize(a,!1,!0,0,2)),onTouchstart:t[25]||(t[25]=a=>e.changeCropSize(a,!1,!0,0,2))},null,32),n("span",{class:"crop-point point8",onMousedown:t[26]||(t[26]=a=>e.changeCropSize(a,!0,!0,2,2)),onTouchstart:t[27]||(t[27]=a=>e.changeCropSize(a,!0,!0,2,2))},null,32)]))],4),[[B,e.cropping]])],544)}var q=Ut(Bt,[["render",Gt],["__scopeId","data-v-be5e5ddc"]]);typeof window!="undefined"&&window.Vue&&window.Vue.createApp({}).component("VueCropper",q);const qt={name:"PersonInfo",props:{enableInternetAccess:{type:Boolean,default:!1}},components:{VueCropper:q},emits:["personIconChange"],data(){return{flag:!0,domainName:"",personalName:"",personalSign:"",personalName_:"",personalSign_:"",iconimg:H,prewimg:H,changeimg:!1,option:{img:H,size:1,full:!1,outputType:"png",canMove:!1,fixed:!0,fixedNumber:[1,1],fixedBox:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:300,autoCropHeight:300,centerBox:!1,high:!0},previewStylea:{},previewStyleb:{},previewStylec:{},previews:{},fileList:[]}},beforeMount(){this.persapi(),this.gimgapi()},methods:{savePerson(){this.pimgapi(),Z(this.personalName_,this.personalSign_).then(e=>{e.code==="ACC-201"?(this.personalName=this.personalName_,this.personalSign=this.personalSign_,this.flag=!0,this.$emit("personIconChange")):e.code==="ACC-400"?X.error(this.$t("setting.space_id_error")):X.error(this.$t("notify.opera_fail"))})},cancelPerson(){this.gimgapi(),this.personalName_=this.personalName,this.personalSign_=this.personalSign,this.flag=!0},keyup(){this.personalName_=this.personalName_.replace(/[`~!@#$%^&*()\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"")},keydown(){this.personalName_=this.personalName_.replace(/[`~!@#$%^&*()\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"")},pimgapi(){typeof this.prewimg!="string"&&ee(this.prewimg).then(e=>{e.code===200&&this.$emit("personIconChange")})},chflag(){we(()=>{this.flag=!1})},ref(){this.iconimg=window.URL.createObjectURL(this.prewimg)},persapi(){let e=R();e&&e.code==="ACC-200"?(this.personalName=e.results[0].personalName,this.personalSign=e.results[0].personalSign,this.personalName_=this.personalName,this.personalSign_=this.personalSign,this.domainName=e.results[0].userDomain?"https://"+e.results[0].userDomain:""):te().then(t=>{t.code==="ACC-200"&&(this.personalName=t.results[0].personalName,this.personalSign=t.results[0].personalSign,this.personalName_=this.personalName,this.personalSign_=this.personalSign,this.domainName="https://"+t.results[0].userDomain)})},gimgapi(){V().then(e=>{let t=window.URL.createObjectURL(e);this.iconimg=t,this.option.img=t})},getcrop(){this.$refs.cropper.getCropBlob(e=>{this.prewimg=e})},realTime(e){let t=e;this.getcrop(),this.previewStylea={width:t.w+"px",height:t.h+"px",overflow:"hidden",margin:"0","border-radius":"50%",zoom:100/t.w},this.previewStyleb={width:t.w+"px",height:t.h+"px",overflow:"hidden",margin:"0",zoom:50/t.w,"border-radius":"50%"},this.previewStylec={width:t.w+"px",height:t.h+"px",overflow:"hidden",margin:"0",zoom:30/t.w,"border-radius":"50%"},this.previews=e},handelOnChange(e,t){t.length>0&&(this.fileList=[t[t.length-1]]);let i=this.fileList[0].raw,o=new FileReader;o.readAsArrayBuffer(i),o.onload=async s=>{let r=new Blob([s.target.result],{type:" image/png"}),a=window.URL.createObjectURL(r);this.option.img=a}}}},Y=e=>(N("data-v-2afbc81a"),e=e(),P(),e),Qt={key:0},Jt={class:"info"},Kt={class:"y-center"},Zt={class:"infoname"},es=["src"],ts={class:"y-center mt-20"},ss={class:"infoname"},is={class:"ml-20 y-center pl10 inputInfo"},os={class:"y-center mt-20"},rs={class:"infoname"},ns={class:"ml-20 y-center pl10 inputInfo"},as={class:"y-center mt-30"},ls={class:"infoname"},hs={class:"ml-20 flex"},ps={class:"tag1"},cs={key:0,class:"tag3"},ds={key:0,class:"y-center mt-40"},us={class:"infoname"},fs={class:"ml-20 color-grey"},gs={class:"y-center mt-40"},ms=Y(()=>n("span",{class:"infoname"},null,-1)),vs={key:1},ws={class:"info"},bs={class:"y-center"},ys={class:"infoname"},xs=["src"],Cs={class:"y-center mt20"},_s={class:"infoname"},As={class:"ml-20"},Ss={class:"y-center mt20"},ks={class:"infoname"},Is={class:"ml-20"},Es={class:"y-center mt-30"},Ms={class:"infoname"},Os={class:"ml-20 flex"},$s={class:"tag1"},Xs={key:0,class:"tag3"},Ts={key:0,class:"y-center mt-30"},Ys={class:"infoname"},Hs={class:"ml-20 color-grey"},Ws={key:1,class:"y-center mt10"},Ns={style:{"margin-left":"120px"},class:"color-blue"},Ps={class:"y-center mt-40"},zs=Y(()=>n("span",{class:"infoname"},null,-1)),Ls={class:"ml-20 flex"},Us={class:"flex cropper-container"},Bs={class:"x-center",style:{"background-color":"#f5f6fa",width:"470px",height:"300px"}},Ds={style:{width:"300px",height:"300px"}},Rs={class:"mt-7"},Vs={class:"color-blue"},Fs={class:"ml-auto"},js={class:"mb-14 fw-b"},Gs={style:{width:"100px",height:"100px","background-color":"#d7d7d7"}},qs=["src"],Qs=Y(()=>n("div",{class:"mt-13 mb-14 font-12"},"100x100",-1)),Js={style:{"margin-left":"27px",width:"50px",height:"50px","background-color":"#d7d7d7"}},Ks=["src"],Zs=Y(()=>n("div",{class:"mt-13 mb-14 font-12"},"50x50",-1)),ei={style:{"margin-left":"37px",width:"30px",height:"30px","background-color":"#d7d7d7"}},ti=["src"],si=Y(()=>n("div",{class:"mt-13 mb-14 font-12"},"30x30",-1)),ii={class:"y-center"};function oi(e,t,i,o,s,r){const a=C("el-input"),l=C("vueCropper"),p=C("el-upload"),u=C("el-dialog");return f(),g("div",null,[s.flag===!0?(f(),g("div",Qt,[n("div",Jt,h(e.$t("setting.person_info")),1),n("div",Kt,[n("span",Zt,h(e.$t("setting.person_icon")),1),n("img",{class:"imgtoux ml-20",src:s.iconimg},null,8,es)]),n("div",ts,[n("span",ss,h(e.$t("setting.nick_name")),1),n("div",is,h(s.personalName),1)]),n("div",os,[n("span",rs,h(e.$t("setting.signature")),1),n("div",ns,h(s.personalSign),1)]),n("div",as,[n("span",ls,h(e.$t("setting.space_channel")),1),n("div",hs,[n("div",ps,h(e.$t("setting.lan")),1),s.domainName&&i.enableInternetAccess?(f(),g("div",cs,h(e.$t("setting.wlan")),1)):v("",!0)])]),s.domainName&&i.enableInternetAccess?(f(),g("div",ds,[n("span",us,h(e.$t("setting.domain_name")),1),n("div",fs,h(s.domainName),1)])):v("",!0),n("div",gs,[ms,n("span",{class:"ml-20 button-blue",onClick:t[0]||(t[0]=c=>r.chflag())},h(e.$t("buttons.common_edit")),1)])])):(f(),g("div",vs,[n("div",ws,h(e.$t("setting.person_info")),1),n("div",bs,[n("span",ys,h(e.$t("setting.person_icon")),1),n("img",{class:"imgtoux ml-20",src:s.iconimg,alt:"",style:{cursor:"pointer"},onClick:t[1]||(t[1]=c=>s.changeimg=!0)},null,8,xs)]),n("div",Cs,[n("span",_s,h(e.$t("setting.nick_name")),1),n("div",As,[m(a,{class:"inputInfo",maxlength:"24",placeholder:e.$t("setting.name_tips"),"show-word-limit":"",modelValue:s.personalName_,"onUpdate:modelValue":t[2]||(t[2]=c=>s.personalName_=c),modelModifiers:{trim:!0},onKeyup:r.keyup,onKeydown:r.keydown},null,8,["placeholder","modelValue","onKeyup","onKeydown"])])]),n("div",Ss,[n("span",ks,h(e.$t("setting.signature")),1),n("div",Is,[m(a,{class:"inputInfo",resize:"none",maxlength:"120",placeholder:e.$t("setting.signature_tips"),"show-word-limit":"",modelValue:s.personalSign_,"onUpdate:modelValue":t[3]||(t[3]=c=>s.personalSign_=c)},null,8,["placeholder","modelValue"])])]),n("div",Es,[n("span",Ms,h(e.$t("setting.space_channel")),1),n("div",Os,[n("div",$s,h(e.$t("setting.lan")),1),i.enableInternetAccess?(f(),g("div",Xs,h(e.$t("setting.wlan")),1)):v("",!0)])]),i.enableInternetAccess?(f(),g("div",Ts,[n("span",Ys,h(e.$t("setting.domain_name")),1),n("div",Hs,h(s.domainName),1)])):v("",!0),i.enableInternetAccess?(f(),g("div",Ws,[n("div",Ns,h(e.$t("setting.domain_name_tips")),1)])):v("",!0),n("div",Ps,[zs,n("div",Ls,[n("div",{class:"button-blue mr-20",onClick:t[4]||(t[4]=(...c)=>r.savePerson&&r.savePerson(...c))},h(e.$t("buttons.common_save")),1),n("div",{class:"button-white",onClick:t[5]||(t[5]=(...c)=>r.cancelPerson&&r.cancelPerson(...c))},h(e.$t("buttons.common_cancel")),1)])])])),m(u,{modelValue:s.changeimg,"onUpdate:modelValue":t[8]||(t[8]=c=>s.changeimg=c),title:e.$t("setting.change_avatar")},{footer:b(()=>[n("div",ii,[n("div",{class:"ml-auto button-blue",onClick:t[6]||(t[6]=c=>(r.ref(),s.changeimg=!1))},h(e.$t("buttons.common_ok")),1),n("div",{class:"ml-20 button-white",onClick:t[7]||(t[7]=c=>s.changeimg=!1)},h(e.$t("buttons.common_cancel")),1)])]),default:b(()=>[n("div",Us,[n("div",Bs,[n("div",Ds,[m(l,{ref:"cropper",img:s.option.img,"output-size":s.option.size,"output-type":s.option.outputType,info:!0,full:s.option.full,fixed:s.option.fixed,"fixed-number":s.option.fixedNumber,canMove:!0,canMoveBox:!1,"fixed-box":s.option.fixedBox,original:s.option.original,"auto-crop":s.option.autoCrop,"auto-crop-width":s.option.autoCropWidth,"auto-crop-height":s.option.autoCropHeight,"center-box":s.option.centerBox,onRealTime:r.realTime,high:s.option.high,mode:"cover"},null,8,["img","output-size","output-type","full","fixed","fixed-number","fixed-box","original","auto-crop","auto-crop-width","auto-crop-height","center-box","onRealTime","high"]),n("div",Rs,[m(p,{"auto-upload:flase":"","file-list":s.fileList,"show-file-list":!1,"auto-upload":!1,multiple:!1,"on-change":r.handelOnChange},{default:b(()=>[n("span",Vs,h(e.$t("setting.select_picture")),1)]),_:1},8,["file-list","on-change"])])])]),n("div",Fs,[n("div",js,h(e.$t("setting.avatar_preview")),1),n("div",Gs,[n("div",{style:S(s.previewStylea)},[n("div",{style:S(s.previews.div)},[n("img",{src:s.previews.url,style:S([s.previews.img,{"max-width":"max-content"}])},null,12,qs)],4)],4)]),Qs,n("div",Js,[n("div",{style:S(s.previewStyleb)},[n("div",{style:S(s.previews.div)},[n("img",{src:s.previews.url,style:S([s.previews.img,{"max-width":"max-content"}])},null,12,Ks)],4)],4)]),Zs,n("div",ei,[n("div",{style:S(s.previewStylec)},[n("div",{style:S(s.previews.div)},[n("img",{src:s.previews.url,style:S([s.previews.img,{"max-width":"max-content"}])},null,12,ti)],4)],4)]),si])])]),_:1},8,["modelValue","title"])])}var ri=T(qt,[["render",oi],["__scopeId","data-v-2afbc81a"]]),ni="./assets/device.c8746ca3.png";const ai={name:"setting",components:{PersonInfo:ri,ClientList:Ht,SafeSetting:St,more:be,DownUpCover:ye,NotificationCenter:xe},data(){return{iconimg:H,activeName:"notify",spaceSizeTotal:0,spaceSizeUsed:0,spaceSizeUnsed:0,file:"",test:"",memberList:[],deviceVersion:{},point:"",deviceModelNumber:0,user:{},isTrial:!1,enableInternetAccess:!1}},beforeMount(){let e=JSON.parse(localStorage.getItem(W.deviceModelNumber));e>=-299&&e<=-200&&(this.isTrial=!0),this.user=R().results[0],this.isTrial||this.storapi(),this.getMemberList(),this.getDeviceVersion(),Ae().then(o=>{this.deviceModelNumber=o.results.deviceModelNumber,localStorage.setItem(W.deviceModelNumber,o.results.deviceModelNumber)});const t=se(),i=localStorage.getItem("clientUUID");ie(i,t).then(o=>{o.code==="AG-200"&&(localStorage.setItem(W.serviceConfig,JSON.stringify(o.results)),this.enableInternetAccess=o.results.enableInternetAccess,console.log("enableInternetAccess",this.enableInternetAccess)),console.log("serviceConfig",o)})},mounted(){let e=this.$route.query.p;e&&(this.point=e)},methods:{personIconChange(){this.getMemberList()},gotoPoint(){this.point&&document.querySelector("#"+this.point).scrollIntoView()},uploadImg(e,t){var i=e.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value))return alert("\u56FE\u7247\u7C7B\u578B\u5FC5\u987B\u662F.gif,jpeg,jpg,png,bmp\u4E2D\u7684\u4E00\u79CD"),!1;var o=new FileReader;o.onload=s=>{let r;typeof s.target.result=="object"?r=window.URL.createObjectURL(new Blob([s.target.result])):r=s.target.result,t===1?this.option.img=r:t===2&&(this.example2.img=r)},o.readAsArrayBuffer(i)},onClearAll(){},onPrintImg(e){},cutDown(e){return e},storapi(){oe().then(e=>{this.spaceSizeTotal=M(e.spaceSizeTotal),this.spaceSizeUsed=M(e.spaceSizeUsed),this.spaceSizeUnsed=M(e.spaceSizeTotal-e.spaceSizeUsed)})},getMemberList(){setTimeout(this.gotoPoint,500),L.getItem("__memberList__").then(e=>{console.log("from catch memberlist",e),e&&(this.memberList=e)}),re().then(async e=>{if(e.code=="ACC-200"){let t=[];for(let i of e.results){let[o,s]=await Promise.all([ne(i.aoId),V(i.aoId)]);console.log("user storage",o),o.code==="200"&&(i.storage=M(o.results.userStorage)),i.iconUrl=window.URL.createObjectURL(s),t.push(i),this.isTrial&&i.aoId===this.user.aoId&&(this.spaceSizeTotal=M(o.results.totalStorage),this.spaceSizeUsed=i.storage,this.spaceSizeUnsed=M(o.results.totalStorage-o.results.userStorage))}L.setItem("__memberList__",t),this.memberList=t}})},getDeviceVersion(){ae().then(e=>{if(e.code=="AG-200"){let t={};t.deviceName=e.results.deviceName,t.productModel=e.results.productModel,t.snNumber=e.results.snNumber,this.deviceVersion=t}})}}},li=e=>(N("data-v-76470096"),e=e(),P(),e),hi={class:"y-center ml-auto"},pi={class:"mt20",id:"devices"},ci={class:"info"},di={class:"flex"},ui={class:"y-center device"},fi={key:0,class:"zhanwei"},gi=li(()=>n("img",{src:ni},null,-1)),mi={style:{}},vi={class:"fw-b font-16 mt-5 mb-12"},wi={class:"color-85899c lh-20",style:{width:"220px"}},bi={class:"font-12"},yi={class:"color-333333 fw-b"},xi={class:"flex"},Ci={class:"color-85899c lh-20"},_i={class:"font-12"},Ai={class:"color-333333 fw-b"},Si={class:"color-85899c lh-20"},ki={class:"font-12"},Ii={class:"color-333333 fw-b"},Ei={class:"color-85899c lh-20"},Mi={class:"font-12"},Oi={class:"color-333333 fw-b"},$i={class:"flex mt-10"},Xi={class:"color-85899c lh-20"},Ti={class:"font-12"},Yi={class:"color-333333 fw-b"};function Hi(e,t,i,o,s,r){const a=C("DownUpCover"),l=C("NotificationCenter"),p=C("more"),u=C("el-header"),c=C("PersonInfo"),d=C("el-divider"),w=C("ClientList"),k=C("SafeSetting"),y=C("el-main"),x=C("el-container");return f(),F(x,null,{default:b(()=>[m(u,{style:{display:"inline-flex"}},{default:b(()=>[n("div",hi,[m(a),m(l,{class:"ml20 mr20"}),m(p)])]),_:1}),m(y,{class:"container"},{default:b(()=>[m(c,{onPersonIconChange:r.personIconChange,enableInternetAccess:s.enableInternetAccess},null,8,["onPersonIconChange","enableInternetAccess"]),n("div",pi,[n("div",ci,h(e.$t("router.device")),1),n("div",di,[n("div",ui,[s.deviceModelNumber===0?(f(),g("div",fi)):v("",!0),gi,n("div",mi,[n("div",vi,h(`${e.$t("router.ao_space")}\uFF08${e.$t("setting.open_source")}\uFF09`),1),n("div",wi,[n("div",bi,h(e.$t("setting.product_sn")),1),n("div",yi,h(s.deviceVersion.snNumber?s.deviceVersion.snNumber:"- -"),1)]),n("div",xi,[n("div",Ci,[n("div",_i,h(e.$t("setting.total")),1),n("div",Ai,h(s.spaceSizeTotal),1)]),m(d,{direction:"vertical",style:{height:"38px","margin-right":"30px","margin-left":"30px"}}),n("div",Si,[n("div",ki,h(e.$t("setting.used")),1),n("div",Ii,h(s.spaceSizeUsed),1)]),m(d,{direction:"vertical",style:{height:"38px","margin-right":"30px","margin-left":"30px"}}),n("div",Ei,[n("div",Mi,h(e.$t("setting.unused")),1),n("div",Oi,h(s.spaceSizeUnsed),1)])]),n("div",$i,[n("div",Xi,[n("div",Ti,h(e.$t("setting.bound_device")),1),n("div",Yi,h(s.user.phoneModel),1)])])])])])]),m(w),m(k,{class:"mt-40 mb-40"})]),_:1})]),_:1})}var Ki=T(ai,[["render",Hi],["__scopeId","data-v-76470096"]]);export{Ki as default};
