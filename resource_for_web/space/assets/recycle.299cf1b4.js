import{_ as k,D as A,ae as w,ay as D,az as b,aA as E,ao as T}from"./index.0601cc40.js";import{d as _,g as I}from"./toast.5031a956.js";import{i as Q,j as R,k as V,l as O,m as z,a as Y,f as P,s as W,c as X,N as J,D as M,b as G,u as q,_ as K,e as N,g as H,h as Z}from"./fangkuaigray.da9dcb94.js";import{a7 as f,f as n,h as c,P as u,J as j,i as l,M as m,K as x,Q as C,O as d,F as S,a9 as $,D as ee,I as te,ak as se,al as ie}from"./vue.9201f2e4.js";import{E as g}from"./element-plus.02c3c9a9.js";import"./crypto-js.53c8803a.js";import"./lodash.51aea353.js";import"./spark-md5.2cc5764b.js";var le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAB8ElEQVQ4T52UT4jNURTHPx8kYaEQiWJpp6E0SpZSNkSywAKxQFlR1BQpKfmbIgs0KzNJkoUVGzQkVmSjhIQSEWo4Otwfv3lv3sx7zvLecz733HO+58gIFhEC84HZxe0l8ESNVmEZ0GQRMQXYA2wEZgE/i9MY4DVwCTiifmgMbgJGxFKgH/gOHAeuA8+BzGoesBLYDUwA1qq369AhwIhYBtwEeoEd6tcWP0jYaWADsFy9Vfn9BUbEVOApcFXdOlJtq7uIOAuszjqr7/O8DjwKrCqX+d1RLSLGZ5OAa2qW4Q8wIsYCb4Ae9cyopJpDRGwHDgEz1MEKuAi4D8xRUxptW0SkCl4Bi9WBCph16FUntk0amuUXYJPaXwHXABfUyf8J/ARsVvsqYDdwp9ThbSfQiJgGvAO61XsVMLuVh7vUix0Cc5pOAjPVb3XZnMtXgAXqj3agEZGj+AgYULc06jAXQGrqhLq/TeDB/FXRbs74P2EXPWa3+4quUpPDbpWyhXqAfcD67G7T6NXG6XfHgWfAYeCG+rk8mCpYAewFuoDL6rqWy6EGnQscABJeNSyvpwODwBXgQa6w3DzqqZYZ1l+LiEnAkpwgYBzwArirfiwZZyNyQWxTzzfVsJ1GNPpExE7gGLBQfTzsxu4UHBFd6sOM+wU+a7kVXeBoGAAAAABJRU5ErkJggg==";const oe={name:"sear",data(){return{input:"",taskLength:0,netWorkType:1}},props:["category"],emits:["handleChange"],mounted(){this.enter=this.enter.bind(this),A.$on("unCompletefileNum",(e,t)=>{e>99?this.taskLength="99+":this.taskLength=e}),window.addEventListener("keydown",this.enter)},beforeUnmount(){window.removeEventListener("keydown",this.enter)},methods:{showDownUpCover(){A.$emit("showDownUpCover")},sear(){let e=this.input;this.$emit("handleChange",e)},enter(e){e.key=="Enter"&&document.activeElement.id=="ser_input_search"&&this.sear()}}},ne={class:"flex x-center y-center xy-center",style:{width:"34px",height:"34px",background:"#337aff","border-radius":"6px",cursor:"pointer"}},re={key:0,src:Q,alt:"",class:"renwu ml20"},ce={key:1,src:R,alt:"",class:"renwu ml20"},ae={key:2,src:V,alt:"",class:"renwu ml20 poi4"},he={key:3,src:O,alt:"",class:"renwu ml20 poi4"},de={class:"taskLength flex xy-center"};function pe(e,t,a,o,s,i){const h=f("el-input");return n(),c(S,null,[u(h,{class:"ser flex x-center",clearable:"",modelValue:s.input,"onUpdate:modelValue":t[1]||(t[1]=p=>s.input=p),modelModifiers:{trim:!0},size:"small",placeholder:"\u641C\u7D22\u6211\u7684\u6587\u4EF6",id:"ser_input_search",maxlength:"10","show-word-limit":""},{append:j(()=>[l("div",ne,[l("img",{src:le,alt:"",onClick:t[0]||(t[0]=(...p)=>i.sear&&i.sear(...p))})])]),_:1},8,["modelValue"]),l("div",{class:"flex x-center y-center xy-center pointer",style:{position:"relative"},onClick:t[2]||(t[2]=(...p)=>i.showDownUpCover&&i.showDownUpCover(...p))},[s.netWorkType==1&&s.taskLength==0?(n(),c("img",re)):m("",!0),s.netWorkType==2&&s.taskLength==0?(n(),c("img",ce)):m("",!0),s.netWorkType==1&&s.taskLength!=0?(n(),c("img",ae)):m("",!0),s.netWorkType==2&&s.taskLength!=0?(n(),c("img",he)):m("",!0),x(l("div",de,[l("span",null,d(s.taskLength),1)],512),[[C,s.taskLength]])])],64)}var ge=k(oe,[["render",pe]]),fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACZklEQVRYR+2XW4iNYRSGnxdFcirShCRjQkk0UxoXooREDhGK3IhbFBdIhBuUQ26kXEhIMUpiaig34sKpkFOUQ4pIOcXg1Zr+f+z52czes3dSe12uvm99z7f+9a/1fuIfm/7x+RQNYLseGAd0B+4ATZLeF3qhggFsdwWOAHMzhz0On6QbhUAUA7AVWA/cBg4Cn4BJwHzgHjBa0pf2QhQD8AgYAAyW9DI9yPYZYDpQL+lyWQBsdwa+xk0ljcg9xPZGYDOwRNLhcgF0AZqBu5JGZgA2AFuApZIOVQAqGSg4A7bjl1wGTAV65QkQayYDH4BLmTVDgWrgFvAiz/7PwBVgl6SI8bMV2z6QALQXviPrrib9ormlEdkeBDwFngOLgWcdif6Hvb2BvcD4pG03pAAxWCKlpyTNKdPhLWFtrwO2ASsl7UkBegBPgJ7A8TJmIGprERCZqJV0rXUW2J6ZTLmAKad9AzZJiqHWVg/YHgNcB24C20tMUQusBnZLWpXGbjMNbQ8DHgBnJcVkK5nZnhU1BuyUtKYCUMlAvgzUAPezRWi7PzBWUmNGhAwEhku6kPFHnJBs51O/7dlAw9+KMB/AfmA5UCPpYU7QaFrzgKqMPmwCJgB9JH1MOmDxf4Hto8BCoE5SDJK0rZ5Lpme1pBCrqT9EabwZ+kp6818CNEqalnOjY8CCDmYghtxJYIektfmKsBvwFvgOnEgkeKydCAwBTgOvcwpuSvJGiLXvcvwzgH5AfLoQIWF1wKioJUmhPVrsl4eJ7RXAPiAkeKntYtSMpBTq949T21VA6P5OJSR4FXJNUmS31X4AbW5YMOyOY8kAAAAASUVORK5CYII=",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABcUlEQVQ4T63TMUhbURTG8f93o3buUNBUO3eqTVTo0KlTB7UgiE5CQezcpfB8LQomL66llA5iwMWxrgqKIHQyT6vgprXQzcXdJPeUR1ViXgJC+tb7zu9+nHOu6PBTh/X8PyAf2MRBSd+TRLkPllU3gYwxIAtcIDbrdQo/l/W7MfVtgqF589VuejM1njpjA7FjxqpzJAV93piRMe4d04cFbd8gjYBZhrfyfJbxvhKp3NyffGhTMlac5/n+sn4l53cAoA6ENWPj6AGnLMqnkMDKctTiouaagSTqw+sCL2O0UtKPFPDRXsmzFkcauAPcd5yDoT3uMs7jSD0pID9vzzLicr+oP+3AodBeYqzHkZ60AhYFL+JIr9sBw6Elza1WinqXAnKBPXLiBFiKI31pM4WvVcfIcUHnLXuQ+2SDrs4WsAd8c+K05umXY1bGJPAmjrSb2oPG23ILltUVgfRvEw0uJDYRpbigs5abeN8pNP/X8WP6Cym/hBFcTZBiAAAAAElFTkSuQmCC",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABLklEQVQ4T+WTPUvDcBCHn/vHpkXBwUGlk6CDa9vBwdWp+gXq5qIgriqmUBVtwElR+gHcxcmPoBTEKIhjURBcxFGQpElPMrSUmqLQ0Rvv5TnufnfCgCYD1pMIyO1q1oRsi5JpN2jB470rtd6GHcDcno76MBYnmIB1EcZRrrsKKgLF0OZTmuhDlVcQ7QDyZXVEKQJ5FW6SRhNlEhgBGpZh7fZQXn6MUChrw6vKTBKg4OgyMOu5UmnHEwG+Mp+BxdDm0vIpkeZcm6yK8v4ngIkotQwOyo4azlIpVsKAC+D0vwCsFsVI2AiFoyHYDyI2bYsaytXvO3D02XOZjo+kV8p8WWMlJjxXDvrL6OgJwoIqHwlnOyWwdOfKU19AHMhtaVYMw72AtM9b/Vi+uv0Df+M3+rSVEaF9yX0AAAAASUVORK5CYII=",Ae="./assets/wu.739aa605.png";const ve={name:"recycle",components:{more:z,actionItem:Y,fileListItem:P,selectState:W,columnName:X,search:ge,NotificationCenter:J,DownUpCover:M,DeleteFileProgress:G},setup(){let{genContainerHeight:e}=q((t,a)=>{let o=window.innerHeight;t.style.height=o-a.top-10+"px"});return{genContainerHeight:e}},data(){return{fileList:[],selectedFiles:[],chooseState:3,actionsCopy:[],sortType:2,deleteShow:0,deletePercentage:0}},beforeMount:function(){A.$off("deleteFileListCacheComplete"),A.$off("acceptFileActionResult")},mounted:function(){this.getRecyclelist(),A.$on("deleteFileListCacheComplete",()=>{this.getRecyclelist()}),A.$on("acceptFileActionResult",({actionType:e,targetFileArr:t,response:a})=>{(e===w.RESTORE||e===w.DELETE)&&a.code!==200&&t.forEach(o=>{this.fileList.find(i=>i.uuid===o.uuid)||this.fileList.push(o)})})},methods:{changeList(e){this.srinput!==e&&(this.srinput=e,this.srinput!==""?this.serflag=!0:this.serflag=!1,this._resetFileListAndChooseState())},resetSer(){this.serflag=!1,this.srinput="",this.$refs.searchref&&(this.$refs.searchref.input="")},changeSortType(){this.sortType=this.sortType===1?2:1,this._resetFileListAndChooseState()},_resetFileListAndChooseState(){this._resetState()},_resetState(){this.selectedFiles=[],this.actionsCopy=[],this.currentFile=""},getRecyclelist(){D().then(e=>{this.fileList=e.results.fileList||[]}),this.fileList==null?this.chooseState=3:this.chooseState=1},showClearCover(){let e=this.selectedFiles;this.clear(e)},showDeleteCover(){let e=this.selectedFiles;this.delete(e)},showRestoreCover(){let e=this.selectedFiles;this.restore(e)},clear(e,t){_({title:this.$t("buttons.file_clear"),content:this.$t("recycle.clear_desc"),sure:()=>{let a=JSON.parse(JSON.stringify(this.fileList));this.fileList=[],b([],a).then(o=>{o.code===200?(g.success(this.$t("recycle.clear_success")),this.getRecyclelist(),typeof t=="function"&&t(null)):(g.error(this.$t("recycle.clear_fail")),this.fileList=a)})},cancel:()=>{console.log("\u53D6\u6D88")}})},delete(e,t){_({title:this.$t("buttons.common_delete"),content:this.$t("recycle.del_desc",{name:e[0].name},e.length),sure:()=>{this.selectedFiles=[];let a=e.map(o=>o.uuid);a.forEach(o=>{let s=this.fileList.findIndex(i=>i.uuid===o);s!==-1&&this.fileList.splice(s,1)}),b(a,e).then(o=>{o.code===200?(g.success(this.$t("recycle.del_success")),typeof t=="function"&&t(null)):g.error(this.$t("recycle.del_fail"))})},cancel:()=>{console.log("\u53D6\u6D88")}})},restore(e,t){_({title:this.$t("buttons.file_reduction"),content:this.$t("recycle.restore_desc",{name:e[0].name},e.length),sure:()=>{this.deleteShow=1;let a=e.map(o=>o.uuid);a.forEach(o=>{let s=this.fileList.findIndex(i=>i.uuid===o);s!==-1&&this.fileList.splice(s,1)}),E(a,JSON.parse(JSON.stringify(e))).then(o=>{if(o.code===200)this.restoreSuccess(t,0);else if(o.code===201){this.deleteShow=2;let s=o.results.taskId,i=setInterval(()=>{T(s).then(h=>{console.info("percentage",h),h.code===200?h.results.taskStatus==="success"?(clearInterval(i),this.restoreSuccess(t,i)):h.results.taskStatus==="failed"?this.restoreFailed(i):this.deletePercentage=Math.floor(h.results.processed/h.results.total*100):this.restoreFailed(i)}).catch(()=>{this.restoreFailed(i)})},1e3)}else g.error(this.$t("recycle.restore_fail"))})},cancel:()=>{console.log("\u53D6\u6D88")}})},restoreFailed(e){clearInterval(e),this.deleteShow=0,g.error(this.$t("recycle.restore_fail"))},restoreSuccess(e,t){clearInterval(t),this.deleteShow=0,g.success(this.$t("recycle.restore_success")),typeof e=="function"&&e(null)},toastFileDetail(e){this.fileDetail=e,this.showFileDetail=!0},_findIndex(e){return this.selectedFiles.findIndex(t=>t.uuid===e.uuid)},selectAll(){this.selectedFiles=[].concat(this.fileList),this.changeChooseStateAndActions()},clearAll(){this.selectedFiles=[],this.changeChooseStateAndActions()},changeChooseStateAndActions(){if(this.fileList==null)this.chooseState=3;else{let e=this.selectedFiles.length,t=this.fileList.length;e&&e===t?this.chooseState=2:this.chooseState=1}},genHoverCheck(e){return this._findIndex(e)===-1},appendSelected(e){this._findIndex(e)===-1&&this.selectedFiles.push(e),this.changeChooseStateAndActions()},spliceFromSelected(e){let t=this._findIndex(e);t!==-1&&this.selectedFiles.splice(t,1),this.changeChooseStateAndActions()},genSrc(e){return I(e)}}},v=e=>(se("data-v-eb6e840c"),e=e(),ie(),e),_e={class:"rec"},xe={class:"pl16 pr16 pt10 pb10 y-center"},ye={class:"flex"},we=v(()=>l("img",{class:"img",alt:"",src:fe},null,-1)),be={class:"font14"},ke=v(()=>l("img",{class:"img",alt:"",src:ue},null,-1)),Ce={class:"font14"},Se=v(()=>l("img",{class:"img",alt:"",src:me},null,-1)),Fe={class:"font14"},Le={class:"flex ml-auto"},Be={class:"container"},Ue={class:"flex ml19 mt20 mr20"},De={class:"xy-center ml-auto"},Ee={key:0,src:H,class:"img-right pointer mr20"},Te={key:2,src:Z,class:"img-right pointer"},Ie={class:"mt20 mb20 ml19"},Qe={key:0,class:"quanxuan-item flex y-center pointer"},Re={key:1,class:"quanxuan-item flex y-center"},Ve={class:"column-div"},Oe={style:{"margin-right":"6px","font-weight":"500"}},ze={class:"column-div floatRight"},Ye={style:{"margin-right":"6px","font-weight":"500"}},Pe={key:0,class:"w-100 h-100 flex xy-center",style:{"margin-top":"-92px"}},We={class:"empty-container x-center y-center flex xy-center"},Xe=v(()=>l("img",{src:Ae,alt:"",class:"empty-img mb10"},null,-1));function Je(e,t,a,o,s,i){const h=f("DownUpCover"),p=f("NotificationCenter"),F=f("more"),y=f("selectState"),L=f("fileListItem"),B=f("DeleteFileProgress"),U=$("rect");return n(),c("div",_e,[l("div",xe,[l("div",ye,[l("div",{class:"button-img pointer",style:{},onClick:t[0]||(t[0]=(...r)=>i.showClearCover&&i.showClearCover(...r))},[we,l("span",be,d(e.$t("buttons.file_clear")),1)]),s.selectedFiles.length>0?(n(),c(S,{key:0},[l("div",{class:"button-img2 pointer ml-20 mr-20",onClick:t[1]||(t[1]=(...r)=>i.showRestoreCover&&i.showRestoreCover(...r))},[ke,l("span",Ce,d(e.$t("buttons.file_reduction")),1)]),l("div",{class:"button-img2 pointer",onClick:t[2]||(t[2]=(...r)=>i.showDeleteCover&&i.showDeleteCover(...r))},[Se,l("span",Fe,d(e.$t("buttons.common_delete")),1)])],64)):m("",!0)]),l("div",Le,[u(h),u(p,{class:"ml20 mr20"}),u(F)])]),x((n(),c("div",Be,[l("div",Ue,[l("span",null,d(e.$t("router.me_recycle_bin")),1),l("div",De,[x(l("span",{class:"font14 select-count mr20"},d(e.$t("breadcrumb.select_files",s.selectedFiles.length)),513),[[C,s.selectedFiles.length]]),s.sortType==1?(n(),c("img",Ee)):(n(),c("img",{key:1,src:K,class:"img-right pointer mr20",onClick:t[3]||(t[3]=(...r)=>i.changeSortType&&i.changeSortType(...r))})),s.sortType==2?(n(),c("img",Te)):(n(),c("img",{key:3,src:N,class:"img-right pointer",onClick:t[4]||(t[4]=(...r)=>i.changeSortType&&i.changeSortType(...r))}))])]),l("div",Ie,[s.sortType==2?(n(),c("div",Qe,[u(y,{selectedFiles:s.selectedFiles,fileList:s.fileList,onSelectAll:i.selectAll,onClearAll:i.clearAll},null,8,["selectedFiles","fileList","onSelectAll","onClearAll"]),l("span",{class:ee(s.fileList.length===0?"span-disabled":"")},d(e.$t("buttons.common_select_all")),3)])):m("",!0),s.sortType==1?(n(),c("div",Re,[u(y,{selectedFiles:s.selectedFiles,fileList:s.fileList,onSelectAll:i.selectAll,onClearAll:i.clearAll},null,8,["selectedFiles","fileList","onSelectAll","onClearAll"]),l("div",Ve,[l("span",Oe,d(e.$t("space.file_name")),1)]),l("div",ze,[l("span",Ye,d(e.$t("recycle.delete_time")),1)])])):m("",!0)]),s.fileList.length===0?(n(),c("div",Pe,[l("div",We,[Xe,l("span",null,d(e.$t("recycle.recycle_nodata"))+"\uFF5E",1)])])):(n(),te(L,{key:1,fileList:s.fileList,"onUpdate:fileList":t[5]||(t[5]=r=>s.fileList=r),selectedFiles:s.selectedFiles,"onUpdate:selectedFiles":t[6]||(t[6]=r=>s.selectedFiles=r),onGenHoverCheck:i.genHoverCheck,onAppendSelected:i.appendSelected,onSpliceFromSelected:i.spliceFromSelected,sortType:s.sortType,"onUpdate:sortType":t[7]||(t[7]=r=>s.sortType=r)},null,8,["fileList","selectedFiles","onGenHoverCheck","onAppendSelected","onSpliceFromSelected","sortType"]))])),[[U,o.genContainerHeight]]),u(B,{show:s.deleteShow,text:"recycle.restoring",percentage:s.deletePercentage},null,8,["show","percentage"])])}var $e=k(ve,[["render",Je],["__scopeId","data-v-eb6e840c"]]);export{$e as default};
